# Paytapper — Project State Snapshot
## Date: 2025-12-18

This document фиксирует фактическое состояние проекта Paytapper
на момент завершения активной разработки v1 (pre-launch).

Цель документа:
- заякорить реальное рабочее состояние
- избежать повторных «кругов»
- служить точкой отсчёта для следующих фаз

---

## 1. Общий статус

Проект Paytapper находится в состоянии рабочего MVP, готового
к использованию реальными пользователями.

Текущий фокус:
- НЕ добавление фич
- НЕ рефакторинг ради чистоты
- стабилизация и подготовка к запуску

---

## 2. Аутентификация и сессии

### Реализовано
- Регистрация пользователя по email + password
- Хэширование паролей (bcrypt)
- Cookie-based session
- Связка User → Client
- Автоматический редирект в dashboard после регистрации
- Защита dashboard по session.clientId

### Принятые решения
- Нет OAuth (Google и др.) в v1
- Нет email verification в v1
- Login UI существует, но минимальный

Это осознанно и принято.

---

## 3. Dashboard (/client/[clientId]/dashboard)

### Статус
Dashboard считается принятым и достаточным для v1.

### Содержимое
- Client info (ID, name, email)
- Stripe status + CTA на onboarding
- Payments summary
- CSV export
- Stripe mode badge (TEST / LIVE)
- Logout button (UI)

### Важно
- Dashboard не требует дальнейших изменений на данном этапе
- Любые улучшения — только в фазе UX polish или v1.1

---

## 4. Stripe & Payments

### Реализовано
- Stripe TEST и LIVE режимы
- Stripe Connect onboarding
- Платежи через Checkout
- Webhook обработка
- Хранение payments по canonical key (paymentIntentId)
- CSV экспорт

### Статус
Stripe flow считается рабочим и стабильным.

---

## 5. Технические заметки

- Используется Next.js 16 + App Router + Turbopack
- Обнаружен edge-case Turbopack с битым dev-state
- Решение: полный сброс .next и cache
- Текущее состояние dev — стабильное

Эти проблемы не связаны с логикой приложения.

---

## 6. Что НЕ делаем сейчас

Явно зафиксировано:
- Не переписываем dashboard
- Не меняем архитектуру
- Не добавляем новые сущности
- Не добавляем OAuth
- Не оптимизируем преждевременно

---

## 7. Следующие возможные направления

(выбирается отдельно)
A. Подготовка к реальному запуску
B. UX polish (копирайтинг, мелкие улучшения)
C. Документация и онбординг
D. v1.1 planning

---

## 8. Итог

Paytapper:
- функционально готов
- архитектурно согласован
- пригоден для реальных пользователей

Текущая версия считается baseline v1.

Любые изменения после этой точки должны:
- иметь явную цель
- быть согласованы
- не ломать зафиксированное состояние
